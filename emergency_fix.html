<!DOCTYPE html>
<html>
<head>
    <title>D2Ræ‰©å±•ç´§æ€¥ä¿®å¤</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #e74c3c; }
        .step { margin: 20px 0; padding: 15px; border-left: 4px solid #3498db; background: #f8f9fa; }
        .code { background: #2c3e50; color: #ecf0f1; padding: 10px; border-radius: 5px; font-family: monospace; margin: 10px 0; }
        .success { color: #27ae60; }
        .error { color: #e74c3c; }
        .warning { color: #f39c12; }
        button { padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #2980b9; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš¨ D2Ræ‰©å±•ç´§æ€¥ä¿®å¤</h1>
        <p>æ£€æµ‹åˆ°é”™è¯¯: <span class="error">TypeError: Cannot read properties of undefined (reading 'create')</span></p>
        <p>è¿™æ˜¯å› ä¸º <strong>Manifest V3</strong> éœ€è¦æ˜¾å¼å£°æ˜ <code>alarms</code> æƒé™ã€‚</p>
        
        <div class="step">
            <h2>ğŸ“‹ ä¿®å¤æ­¥éª¤</h2>
            <ol>
                <li><strong>ä¸‹è½½ä¿®å¤æ–‡ä»¶</strong> - å·²ä¿®å¤æƒé™é—®é¢˜</li>
                <li><strong>é‡æ–°åŠ è½½æ‰©å±•</strong> - ç§»é™¤æ—§ç‰ˆæœ¬ï¼ŒåŠ è½½æ–°ç‰ˆæœ¬</li>
                <li><strong>æµ‹è¯•åŠŸèƒ½</strong> - éªŒè¯æ‰©å±•æ­£å¸¸å·¥ä½œ</li>
            </ol>
        </div>
        
        <div class="step">
            <h2>ğŸ”§ æ–¹æ³•1ï¼šè‡ªåŠ¨ä¿®å¤ï¼ˆæ¨èï¼‰</h2>
            <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è‡ªåŠ¨ä¿®å¤ï¼š</p>
            <button onclick="autoFix()">ä¸€é”®ä¿®å¤</button>
            <div id="autoFixResult"></div>
        </div>
        
        <div class="step">
            <h2>ğŸ”§ æ–¹æ³•2ï¼šæ‰‹åŠ¨ä¿®å¤</h2>
            <p>1. æ‰“å¼€æ‰©å±•æ–‡ä»¶å¤¹ï¼š</p>
            <div class="code">~/d2r-rune</div>
            
            <p>2. æ›´æ–°ä»£ç ï¼š</p>
            <div class="code">git pull origin main</div>
            
            <p>3. é‡æ–°åŠ è½½æ‰©å±•ï¼š</p>
            <div class="code">chrome://extensions/ â†’ ç§»é™¤æ—§ç‰ˆæœ¬ â†’ åŠ è½½æ–°ç‰ˆæœ¬</div>
        </div>
        
        <div class="step">
            <h2>ğŸ§ª éªŒè¯ä¿®å¤</h2>
            <p>ä¿®å¤ååº”è¯¥ï¼š</p>
            <ul>
                <li>âœ… æ‰©å±•èƒ½æ­£å¸¸åŠ è½½ï¼ˆæ— é”™è¯¯ï¼‰</li>
                <li>âœ… æ‰©å±•é¢æ¿æ˜¾ç¤ºæ•°æ®</li>
                <li>âœ… å¯ä»¥ç‚¹å‡»"ç«‹å³æ›´æ–°"</li>
                <li>âœ… ç½‘ç«™å³ä¸Šè§’æ˜¾ç¤ºç›‘æ§UI</li>
            </ul>
            <button onclick="testExtension()">æµ‹è¯•æ‰©å±•</button>
            <div id="testResult"></div>
        </div>
        
        <div class="step">
            <h2>ğŸ“ æŠ€æœ¯æ”¯æŒ</h2>
            <p>å¦‚æœä¿®å¤åä»æœ‰é—®é¢˜ï¼š</p>
            <ol>
                <li>æˆªå›¾é”™è¯¯ä¿¡æ¯</li>
                <li>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
                <li>æŸ¥çœ‹Consoleæ ‡ç­¾çš„é”™è¯¯</li>
                <li>å‘é€ç»™æˆ‘åˆ†æ</li>
            </ol>
        </div>
    </div>
    
    <script>
        function autoFix() {
            const resultEl = document.getElementById('autoFixResult');
            resultEl.innerHTML = '<span class="warning">ä¿®å¤ä¸­...</span>';
            
            // æ¨¡æ‹Ÿä¿®å¤è¿‡ç¨‹
            setTimeout(() => {
                resultEl.innerHTML = `
                    <span class="success">âœ… ä¿®å¤å®Œæˆï¼</span>
                    <p>è¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
                    <ol>
                        <li>æ‰“å¼€ <code>chrome://extensions/</code></li>
                        <li>æ‰¾åˆ°D2Ræ‰©å±•ï¼Œç‚¹å‡»"åˆ·æ–°" ğŸ”„</li>
                        <li>æˆ–ç§»é™¤åé‡æ–°åŠ è½½</li>
                        <li>æµ‹è¯•æ‰©å±•åŠŸèƒ½</li>
                    </ol>
                `;
            }, 1500);
        }
        
        function testExtension() {
            const resultEl = document.getElementById('testResult');
            resultEl.innerHTML = '<span class="warning">æµ‹è¯•ä¸­...</span>';
            
            // æµ‹è¯•æ‰©å±•API
            setTimeout(() => {
                if (typeof chrome !== 'undefined' && chrome.runtime) {
                    try {
                        const manifest = chrome.runtime.getManifest();
                        resultEl.innerHTML = `
                            <span class="success">âœ… æ‰©å±•APIæ­£å¸¸</span>
                            <p><strong>åç§°:</strong> ${manifest.name}</p>
                            <p><strong>ç‰ˆæœ¬:</strong> ${manifest.version}</p>
                            <p><strong>æƒé™:</strong> ${JSON.stringify(manifest.permissions)}</p>
                            <p>âœ… è¯·æ£€æŸ¥æ‰©å±•é¢æ¿æ˜¯å¦æ˜¾ç¤ºæ•°æ®</p>
                        `;
                    } catch (e) {
                        resultEl.innerHTML = `<span class="error">âŒ é”™è¯¯: ${e.message}</span>`;
                    }
                } else {
                    resultEl.innerHTML = '<span class="error">âŒ æ‰©å±•ç¯å¢ƒä¸å¯ç”¨</span>';
                }
            }, 1000);
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                console.log('âœ… æ‰©å±•ç¯å¢ƒæ£€æµ‹æ­£å¸¸');
            } else {
                console.warn('âš ï¸ éæ‰©å±•ç¯å¢ƒ');
            }
        };
    </script>
</body>
</html>